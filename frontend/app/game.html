<!DOCTYPE html>
<html lang="en">
<head id="shared-head">
    <link rel="stylesheet" href="/src/styles/styles.css">
</head>
<body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
        fetch('../templates/head.html')
            .then(resp => resp.text())
            .then(html => {
                document.getElementById('shared-head').innerHTML += html
        })

        function toggle(id){
            const x = $("#" + id)
            if(x.is(":visible")){
                x.addClass("c")
                setTimeout(() => {
                    x.removeClass("c")
                    x.hide()
                }, 300)
            } else {
                x.addClass("o")
                x.show();
                setTimeout(() => {
                    x.removeClass("o")
                }, 300)
            }
        }

        function toggleFloating(id1, id2){
            toggle(id1)
            toggle(id2)
        }
    </script>
    <script src="/src/js/navbar.js"></script>

    <div class="navbar">
    </div>

    <div class="panel wide center">
        <h1>Get Ready!</h1>

        <p>When you're ready, start the game!</p>
        <button onclick="toggleFloating('video-layout', 'video-panel'); init()">Start Game</button>
    </div>

    <div class="floating" id="video-layout" style="display: none;">
        <div class="panel" id="video-panel" style="display: none;width:100%;box-sizing: border-box;height:100dvh">
            <button class="close normal" onclick="toggleFloating('video-layout', 'video-panel')"><i class="material-symbols-rounded">close</i></button>

            <div class="list">
                <div class="panel" id="game">
                    <canvas id="canvas"></canvas>

                    <div class="holder">
                        <div>
                            <p id="riddle"></p>
                        </div>
                        <div class="btn-input">
                            <input type="text" id="voice-input" placeholder="What am I?">
                            <button id="mic-btn" class="clear" style="right:75px;"><i class="material-symbols-rounded">mic</i></button>
                            <button onclick="inputAnswer(this)"><i class="material-symbols-rounded">arrow_forward</i></button>
                        </div>
                    </div>
                </div>

                <div class="panel" id="camera">
                    <div class="loading"></div>
            
                    <video id="video" autoplay>
                    </video>

                    <button id="snap"><i class="material-symbols-rounded">photo_camera</i> Capture</button>
                </div>
            </div>
        </div>
    </div>

    <div class="floating" id="answer-layout">
        <div class="panel" id="answer-panel">
            <img src="/src/media/coin.svg" alt="Image coin reward correct" class="coin">
            <h2>Correct!</h2>
            <p>The answer was <b><span id="answer"></span></b>.</p>
            <p>Rounds get harder as you go on.</p>
            <button>Next Round <i class="material-symbols-rounded">arrow_forward</i></button>
        </div>
    </div>

    <div class="floating" id="wrong-layout">
        <div class="panel" id="wrong-panel">
            <img src="/src/media/incorrect.svg" alt="Image coin incorrect" class="coin">
            <h2>Incorrect</h2>
            <p>You still have <b><span id="tries">3</span></b> tries.</p>
            <button>Try again <i class="material-symbols-rounded">cached</i></button>
        </div>
    </div>

    <script src="/src/js/game.js"></script>
</body>
</html>
