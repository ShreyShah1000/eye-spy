<!DOCTYPE html>
<html lang="en">
<head id="shared-head">
    <link rel="stylesheet" href="/src/styles/styles.css">
</head>
<body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
        fetch('../templates/head.html')
            .then(resp => resp.text())
            .then(html => {
                document.getElementById('shared-head').innerHTML += html
        })

        function toggle(id){
            const x = $("#" + id)
            if(x.is(":visible")){
                x.addClass("c")
                setTimeout(() => {
                    x.removeClass("c")
                    x.hide()
                }, 300)
            } else {
                x.addClass("o")
                x.show();
                setTimeout(() => {
                    x.removeClass("o")
                }, 300)
            }
        }

        function toggleFloating(id1, id2){
            toggle(id1)
            toggle(id2)
        }
    </script>
    <script src="/src/js/navbar.js"></script>

    <div class="navbar">
    </div>

    <div class="panel leaderboard" id="leaderboard">
        <h1>Leaderboard</h1>
        <p>Who's the best spy?</p>
        
        <script>
            fetch('https://eye-spy-backend.onrender.com/scores')
            .then(res => res.json()) // Parse the JSON response
            .then(data => {
                console.log(data.leaderboard)
                for(var i = 0; i < data.leaderboard.length; i++){
                    document.getElementById('leaderboard').innerHTML += `<div><b>${i + 1}. ${data.leaderboard[i].username}</b> - ${data.leaderboard[i].score} points</div>`
                }
            })
            .catch(error => console.error('Error fetching scores:', error));
        </script>
    </div>
</body>
</html>
